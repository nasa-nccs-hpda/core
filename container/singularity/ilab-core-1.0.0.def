## Generate core container with ilab-specific dependencies that builds on the Python ecosystem container
Bootstrap: localimage
FROM: ./cisto-data-science-1.0.0.simg

%labels
    Author gtamkin
    Version v1.0.0

%help
===========================================================================
	- ilab-core (extends -> python3-data-science) â€“ contains GIS & ilab dependencies:
		a.	GDAL
		b.	Celery
		c.  Redis (Celery server)
===========================================================================

%post

    # install GDAL
    apt-get update && apt-get install --fix-missing -y vim sudo gdal-bin libgdal-dev
    python3.7 -m pip install --global-option=build_ext --global-option="-I/usr/include/gdal" GDAL==2.1.3
    gdal-config --version

    # install Celery
    python3.7 -m pip install --upgrade celery==4.3.0

    # install Redis (Celery server dependencies)
    python3.7 -m pip install --upgrade redis==3.4.1
